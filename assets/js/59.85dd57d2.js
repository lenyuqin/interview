(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{466:function(s,a,t){"use strict";t.r(a);var n=t(21),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"hashmap-concurrenthashmap-concurrenthashset-hashset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hashmap-concurrenthashmap-concurrenthashset-hashset"}},[s._v("#")]),s._v(" Hashmapï¼ŒConcurrentHashMapï¼ŒConcurrentHashSetï¼ŒHashSet")]),s._v(" "),t("p",[s._v("å› ä¸ºè¿™äº›æˆ‘ä¸ªäººéƒ½æœ‰äº†è§£è¿‡ï¼Œç›®å‰å°±è®°å½•ä¸€äº›å¸¸è§çš„é—®é¢˜é…åˆå›¾ç‰‡æ–¹ä¾¿è®°å¿†ï¼Œç”¨äºå¤‡å¿˜ğŸ‘€ã€‚")]),s._v(" "),t("h2",{attrs:{id:"hashmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hashmap"}},[s._v("#")]),s._v(" Hashmap")]),s._v(" "),t("p",[s._v("æ•°æ®ç»“æ„å›¾")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/946c3ddd77b0a44c8c441b7ba8b06a27.png",alt:"img"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/45323e4415df307ef3823d783e1077a6.png",alt:"0-00000031"}})]),s._v(" "),t("h3",{attrs:{id:"å¸¸è§é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§é—®é¢˜"}},[s._v("#")]),s._v(" å¸¸è§é—®é¢˜ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("Java1.8å’Œ1.7ï¼ŒHashMapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåšäº†ä»€ä¹ˆä¼˜åŒ–")]),s._v(" "),t("li",[s._v("HashMapæ‰©å®¹è¿‡ç¨‹ï¼Œä¸ºä»€ä¹ˆè¦æ‰©å®¹2çš„å€æ•°ï¼Ÿä¸ºä»€ä¹ˆé»˜è®¤å®¹é‡æ˜¯16ï¼Ÿ")]),s._v(" "),t("li",[s._v("è®²è®²HashMap  getå’Œput")]),s._v(" "),t("li",[s._v("hashmap ä¸ºä»€ä¹ˆå¯ä»¥æ’å…¥ç©ºå€¼")]),s._v(" "),t("li",[s._v("Hashmap ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨")]),s._v(" "),t("li",[s._v("hashmapåˆ¤å®šé‡å¤æ˜¯==è¿˜æ˜¯equals")])]),s._v(" "),t("h4",{attrs:{id:"_1-java1-8å’Œ1-7-hashmapæœ‰ä»€ä¹ˆåŒºåˆ«-åšäº†ä»€ä¹ˆä¼˜åŒ–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-java1-8å’Œ1-7-hashmapæœ‰ä»€ä¹ˆåŒºåˆ«-åšäº†ä»€ä¹ˆä¼˜åŒ–"}},[s._v("#")]),s._v(" 1ï¼ŒJava1.8å’Œ1.7ï¼ŒHashMapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œåšäº†ä»€ä¹ˆä¼˜åŒ–")]),s._v(" "),t("p",[s._v("ç»“æ„ä¼˜åŒ–ï¼šç”±æ•°ç»„+é“¾è¡¨è½¬åŒ–ä¸ºæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘")]),s._v(" "),t("p",[s._v("æ’å…¥ä¼˜åŒ–ï¼šç”±å¤´æ’æ³•è½¬åŒ–ä¸ºå°¾æ’æ³•")]),s._v(" "),t("p",[s._v("æ‰©å®¹ä¼˜åŒ–ï¼šjava8  ä¸­å¯¹ hashmap æ‰©å®¹ä¸æ˜¯é‡æ–°è®¡ç®—æ‰€æœ‰å…ƒç´ åœ¨æ•°ç»„çš„ä½ç½®ï¼Œè€Œæ˜¯æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ 2 æ¬¡å¹‚çš„æ‰©å±•(æŒ‡é•¿åº¦æ‰©ä¸ºåŸæ¥ 2  å€)ï¼Œæ‰€ä»¥ï¼Œå…ƒç´ çš„ä½ç½®è¦ä¹ˆæ˜¯åœ¨åŸä½ç½®ï¼Œè¦ä¹ˆæ˜¯åœ¨åŸä½ç½®å†ç§»åŠ¨ 2 æ¬¡å¹‚çš„ä½ç½®ï¼Œåœ¨æ‰©å…… HashMap çš„æ—¶å€™ï¼Œä¸éœ€è¦åƒ JDK1.7 çš„å®ç°é‚£æ ·é‡æ–°è®¡ç®— hashï¼Œ åªéœ€è¦çœ‹çœ‹åŸæ¥çš„ hash å€¼æ–°å¢çš„é‚£ä¸ª bit æ˜¯ 1 è¿˜æ˜¯ 0 å°±å¥½äº†ï¼Œæ˜¯ 0 çš„è¯ç´¢å¼•æ²¡å˜ï¼Œæ˜¯ 1 çš„è¯ç´¢å¼•å˜æˆâ€œåŸç´¢å¼•+oldCapâ€")]),s._v(" "),t("h4",{attrs:{id:"_2-hashmapæ‰©å®¹è¿‡ç¨‹-ä¸ºä»€ä¹ˆè¦æ‰©å®¹2çš„å€æ•°-ä¸ºä»€ä¹ˆé»˜è®¤å®¹é‡æ˜¯16"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-hashmapæ‰©å®¹è¿‡ç¨‹-ä¸ºä»€ä¹ˆè¦æ‰©å®¹2çš„å€æ•°-ä¸ºä»€ä¹ˆé»˜è®¤å®¹é‡æ˜¯16"}},[s._v("#")]),s._v(" 2ï¼ŒHashMapæ‰©å®¹è¿‡ç¨‹ï¼Œä¸ºä»€ä¹ˆè¦æ‰©å®¹2çš„å€æ•°ï¼Ÿä¸ºä»€ä¹ˆé»˜è®¤å®¹é‡æ˜¯16ï¼Ÿ")]),s._v(" "),t("p",[s._v("æ‰©å®¹è¿‡ç¨‹ï¼šåˆ†ä¸ºä¸¤æ­¥")]),s._v(" "),t("ul",[t("li",[s._v("æ‰©å®¹ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Entryç©ºæ•°ç»„ï¼Œé•¿åº¦æ˜¯åŸæ•°ç»„çš„2å€ã€‚")]),s._v(" "),t("li",[s._v("ReHashï¼šéå†åŸEntryæ•°ç»„ï¼ŒæŠŠæ‰€æœ‰çš„Entryé‡æ–°Hashåˆ°æ–°æ•°ç»„ã€‚")])]),s._v(" "),t("p",[s._v("è¿™æ ·æ˜¯ä¸ºäº†ä½è¿ç®—çš„æ–¹ä¾¿ï¼Œ"),t("strong",[s._v("ä½ä¸è¿ç®—æ¯”ç®—æ•°è®¡ç®—çš„æ•ˆç‡é«˜äº†å¾ˆå¤š")]),s._v("ï¼Œä¹‹æ‰€ä»¥é€‰æ‹©16ï¼Œæ˜¯ä¸ºäº†æœåŠ¡å°†Keyæ˜ å°„åˆ°indexçš„ç®—æ³•ã€‚")]),s._v(" "),t("p",[s._v("æ˜¯çš„æˆ‘ä»¬é€šè¿‡Keyçš„HashCodeå€¼å»åšä½è¿ç®—")]),s._v(" "),t("p",[s._v("é€‰åå…­æ˜¯å·¥ä¸šæ—¶é—´çš„æ•ˆæœï¼šä¸ºäº†å®ç°å‡åŒ€åˆ†å¸ƒ")]),s._v(" "),t("h4",{attrs:{id:"_3-è®²è®²hashmap-getå’Œput"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-è®²è®²hashmap-getå’Œput"}},[s._v("#")]),s._v(" 3ï¼Œè®²è®²HashMap  getå’Œput")]),s._v(" "),t("p",[t("strong",[s._v("put")])]),s._v(" "),t("p",[s._v("å¾€mapæ’å…¥å…ƒç´ çš„æ—¶å€™é¦–å…ˆé€šè¿‡å¯¹key hashç„¶åä¸æ•°ç»„é•¿åº¦-1è¿›è¡Œä¸è¿ç®—((n-1)&hash)ï¼Œéƒ½æ˜¯2çš„æ¬¡å¹‚æ‰€ä»¥ç­‰åŒäºå–æ¨¡ï¼Œä½†æ˜¯ä½è¿ç®—çš„æ•ˆç‡æ›´é«˜ã€‚æ‰¾åˆ°æ•°ç»„ä¸­çš„ä½ç½®ä¹‹åï¼Œå¦‚æœæ•°ç»„ä¸­æ²¡æœ‰å…ƒç´ ç›´æ¥å­˜å…¥ï¼Œåä¹‹åˆ™åˆ¤æ–­keyæ˜¯å¦ç›¸åŒï¼Œkeyç›¸åŒå°±è¦†ç›–ï¼Œå¦åˆ™å°±ä¼šæ’å…¥åˆ°é“¾è¡¨çš„å°¾éƒ¨ï¼Œå¦‚æœé“¾è¡¨çš„é•¿åº¦è¶…è¿‡8ï¼Œåˆ™ä¼šè½¬æ¢æˆçº¢é»‘æ ‘ï¼Œæœ€ååˆ¤æ–­æ•°ç»„é•¿åº¦æ˜¯å¦è¶…è¿‡é»˜è®¤çš„é•¿åº¦*è´Ÿè½½å› å­ä¹Ÿå°±æ˜¯12ï¼Œè¶…è¿‡åˆ™è¿›è¡Œæ‰©å®¹ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img.xiaoyou66.com/2021/03/30/c83536ef87158.jpg",alt:"img"}})]),s._v(" "),t("h4",{attrs:{id:"_4-hashmap-ä¸ºä»€ä¹ˆå¯ä»¥æ’å…¥ç©ºå€¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-hashmap-ä¸ºä»€ä¹ˆå¯ä»¥æ’å…¥ç©ºå€¼"}},[s._v("#")]),s._v(" 4ï¼Œhashmap ä¸ºä»€ä¹ˆå¯ä»¥æ’å…¥ç©ºå€¼")]),s._v(" "),t("p",[s._v("HashMap ä¸­æ·»åŠ  key ==null çš„ Entry æ—¶ä¼šè°ƒç”¨ putForNullKey æ–¹æ³•ç›´æ¥å»éå†table[0]Entry é“¾è¡¨ï¼Œå¯»æ‰¾ e.key ==null çš„ Entry æˆ–è€…æ²¡æœ‰æ‰¾åˆ°éå†ç»“æŸ")]),s._v(" "),t("p",[s._v("å¦‚æœæ‰¾åˆ°äº† e.key==nullï¼Œå°±ä¿å­˜ null å€¼å¯¹åº”çš„åŸå€¼ oldValueï¼Œç„¶åè¦†ç›–åŸå€¼ï¼Œå¹¶è¿”å›oldValue\nå¦‚æœåœ¨ table[0]Entry é“¾è¡¨ä¸­æ²¡æœ‰æ‰¾åˆ°å°±è°ƒç”¨addEntry æ–¹æ³•æ·»åŠ ä¸€ä¸ª key ä¸º null çš„ Entry")]),s._v(" "),t("h4",{attrs:{id:"_5-hashmap-ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-hashmap-ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨"}},[s._v("#")]),s._v(" 5ï¼ŒHashmap ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨")]),s._v(" "),t("p",[s._v("é¦–å…ˆHashMapæ˜¯"),t("strong",[s._v("çº¿ç¨‹ä¸å®‰å…¨")]),s._v("çš„ï¼Œå…¶ä¸»è¦ä½“ç°ï¼š")]),s._v(" "),t("p",[s._v("1.åœ¨jdk1.7ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæ‰©å®¹æ—¶ä¼šé€ æˆç¯å½¢é“¾æˆ–æ•°æ®ä¸¢å¤±ã€‚")]),s._v(" "),t("p",[s._v("2.åœ¨jdk1.8ä¸­ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¼šå‘ç”Ÿæ•°æ®è¦†ç›–çš„æƒ…å†µã€‚")]),s._v(" "),t("h4",{attrs:{id:"_6-hashmapåˆ¤å®šé‡å¤æ˜¯-è¿˜æ˜¯equals"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-hashmapåˆ¤å®šé‡å¤æ˜¯-è¿˜æ˜¯equals"}},[s._v("#")]),s._v(" 6ï¼Œhashmapåˆ¤å®šé‡å¤æ˜¯==è¿˜æ˜¯equals")]),s._v(" "),t("p",[s._v("å½“ä½ æŠŠå¯¹è±¡åŠ å…¥"),t("code",[s._v("HashSet")]),s._v("æ—¶ï¼ŒHashSetä¼šå…ˆè®¡ç®—å¯¹è±¡çš„"),t("code",[s._v("hashcode")]),s._v("å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼šä¸å…¶ä»–åŠ å…¥çš„å¯¹è±¡çš„hashcodeå€¼ä½œæ¯”è¾ƒï¼Œå¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„hashcodeï¼ŒHashSetä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ã€‚ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒhashcodeå€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨"),t("code",[s._v("equalsï¼ˆï¼‰")]),s._v("æ–¹æ³•æ¥æ£€æŸ¥hashcodeç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼ŒHashSetå°±ä¸ä¼šè®©åŠ å…¥æ“ä½œæˆåŠŸã€‚")]),s._v(" "),t("p",[t("strong",[s._v("hashCodeï¼ˆï¼‰ä¸equalsï¼ˆï¼‰çš„ç›¸å…³è§„å®šï¼š")])]),s._v(" "),t("ol",[t("li",[s._v("å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™hashcodeä¸€å®šä¹Ÿæ˜¯ç›¸åŒçš„")]),s._v(" "),t("li",[s._v("ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰,å¯¹ä¸¤ä¸ªequalsæ–¹æ³•è¿”å›true")]),s._v(" "),t("li",[s._v("ä¸¤ä¸ªå¯¹è±¡æœ‰ç›¸åŒçš„hashcodeå€¼ï¼Œå®ƒä»¬ä¹Ÿä¸ä¸€å®šæ˜¯ç›¸ç­‰çš„")]),s._v(" "),t("li",[s._v("ç»¼ä¸Šï¼Œequalsæ–¹æ³•è¢«è¦†ç›–è¿‡ï¼Œåˆ™hashCodeæ–¹æ³•ä¹Ÿå¿…é¡»è¢«è¦†ç›–")]),s._v(" "),t("li",[s._v("hashCode()çš„é»˜è®¤è¡Œä¸ºæ˜¯å¯¹å †ä¸Šçš„å¯¹è±¡äº§ç”Ÿç‹¬ç‰¹å€¼ã€‚å¦‚æœæ²¡æœ‰é‡å†™hashCode()ï¼Œåˆ™è¯¥classçš„ä¸¤ä¸ªå¯¹è±¡æ— è®ºå¦‚ä½•éƒ½ä¸ä¼šç›¸ç­‰ï¼ˆå³ä½¿è¿™ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘ç›¸åŒçš„æ•°æ®ï¼‰ã€‚")])]),s._v(" "),t("p",[t("strong",[s._v("==ä¸equalsçš„åŒºåˆ«")])]),s._v(" "),t("ol",[t("li",[s._v("==æ˜¯åˆ¤æ–­ä¸¤ä¸ªå˜é‡æˆ–å®ä¾‹æ˜¯ä¸æ˜¯æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ equalsæ˜¯åˆ¤æ–­ä¸¤ä¸ªå˜é‡æˆ–å®ä¾‹æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´çš„å€¼æ˜¯ä¸æ˜¯ç›¸åŒ")]),s._v(" "),t("li",[s._v("==æ˜¯æŒ‡å¯¹å†…å­˜åœ°å€è¿›è¡Œæ¯”è¾ƒ equals()æ˜¯å¯¹å­—ç¬¦ä¸²çš„å†…å®¹è¿›è¡Œæ¯”è¾ƒ")]),s._v(" "),t("li",[s._v("==æŒ‡å¼•ç”¨æ˜¯å¦ç›¸åŒ equals()æŒ‡çš„æ˜¯å€¼æ˜¯å¦ç›¸åŒ")])]),s._v(" "),t("h2",{attrs:{id:"hashset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hashset"}},[s._v("#")]),s._v(" HashSet")]),s._v(" "),t("p",[s._v("æ•°æ®ç»“æ„å›¾")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/4f75a708eaac2f5857ebfad96796adc4.png",alt:"img"}})]),s._v(" "),t("h3",{attrs:{id:"å¸¸è§é—®é¢˜-å› ä¸ºæ˜¯åŸºäºhashmap-å®ç°çš„-æ‰€ä»¥ä¸»è¦é—®é¢˜ä¹Ÿæ˜¯é—®hashmapæ¯”è¾ƒå¤š"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§é—®é¢˜-å› ä¸ºæ˜¯åŸºäºhashmap-å®ç°çš„-æ‰€ä»¥ä¸»è¦é—®é¢˜ä¹Ÿæ˜¯é—®hashmapæ¯”è¾ƒå¤š"}},[s._v("#")]),s._v(" å¸¸è§é—®é¢˜ï¼ˆå› ä¸ºæ˜¯åŸºäºhashmap å®ç°çš„ï¼Œæ‰€ä»¥ä¸»è¦é—®é¢˜ä¹Ÿæ˜¯é—®hashmapæ¯”è¾ƒå¤šï¼‰")]),s._v(" "),t("p",[s._v("HashSetåº•å±‚ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿ")]),s._v(" "),t("p",[s._v("å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå°±æ˜¯HshMapçš„valueéƒ½å˜æˆäº†ä¸€ä¸ªObjectå¯¹è±¡")]),s._v(" "),t("h2",{attrs:{id:"concurrenthashmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#concurrenthashmap"}},[s._v("#")]),s._v(" ConcurrentHashMap")]),s._v(" "),t("p",[s._v("æ•°æ®ç»“æ„å›¾")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_jpg/uChmeeX1FpyhVLAW08sszrgEKUamuEKR92tLGjq5XU8SCBVmGAgiaSp95mnibgngXjFjycLTSkDMpOEfKvZaFBzQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1",alt:"å›¾ç‰‡"}})]),s._v(" "),t("p",[t("strong",[s._v("JDK1.8çš„ConcurrentHashMapï¼ˆTreeBin: çº¢é»‘äºŒå‰æ ‘èŠ‚ç‚¹ Node: é“¾è¡¨èŠ‚ç‚¹ï¼‰ï¼š")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://my-blog-to-use.oss-cn-beijing.aliyuncs.com/2019-6/JDK1.8-ConcurrentHashMap-Structure.jpg",alt:"JDK1.8çš„ConcurrentHashMap"}})]),s._v(" "),t("h2",{attrs:{id:"concurrenthashset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#concurrenthashset"}},[s._v("#")]),s._v(" ConcurrentHashSet")]),s._v(" "),t("p",[s._v("æ•°æ®ç»“æ„å›¾ï¼ˆåº•å±‚æ˜¯åŸºäºConcurrentHashMapå®ç°çš„ï¼Œæ‰€ä»¥é—®é¢˜ä¸»è¦å’ŒConcurrentHashMapæœ‰å…³ï¼‰")]),s._v(" "),t("h2",{attrs:{id:"linkedhashmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linkedhashmap"}},[s._v("#")]),s._v(" LinkedHashMap")]),s._v(" "),t("p",[s._v("æ•°æ®ç»“æ„å›¾")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20190711160733331.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTI4NjA5Mzg=,size_16,color_FFFFFF,t_70",alt:"img"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://img.xiaoyou66.com/2021/04/09/fafad2940eb05.jpg",alt:"LinkedHashMapæºç è¯¦ç»†åˆ†æï¼ˆJDK1.8ï¼‰_"}})]),s._v(" "),t("h3",{attrs:{id:"å¸¸è§é—®é¢˜-è¿™ä¸ªé—®çš„å¾ˆå°‘-å› ä¸ºä¹Ÿä¸å¸¸ç”¨-æˆ‘ä¸ªäººåœ¨ä¸€æ¬¡é¢è¯•ä¸­æœ‰è¢«é—®åˆ°-æ‰€ä»¥è¿˜æ˜¯è®°å½•ä¸€ä¸‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§é—®é¢˜-è¿™ä¸ªé—®çš„å¾ˆå°‘-å› ä¸ºä¹Ÿä¸å¸¸ç”¨-æˆ‘ä¸ªäººåœ¨ä¸€æ¬¡é¢è¯•ä¸­æœ‰è¢«é—®åˆ°-æ‰€ä»¥è¿˜æ˜¯è®°å½•ä¸€ä¸‹"}},[s._v("#")]),s._v(" å¸¸è§é—®é¢˜ï¼ˆè¿™ä¸ªé—®çš„å¾ˆå°‘ï¼Œå› ä¸ºä¹Ÿä¸å¸¸ç”¨ï¼Œæˆ‘ä¸ªäººåœ¨ä¸€æ¬¡é¢è¯•ä¸­æœ‰è¢«é—®åˆ°ï¼Œæ‰€ä»¥è¿˜æ˜¯è®°å½•ä¸€ä¸‹ï¼‰")]),s._v(" "),t("p",[s._v("åº•å±‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è¿™é‡Œå®ç°LRUå°±ä¸»è¦æ˜¯è¿™å‡ ä¸ªæ–¹æ³•ï¼Œ accessOrderå®šä¹‰æ˜¯å¦ä¼šæ’åºï¼Œå¦‚æœä¸ºtrueï¼Œé‚£ä¹ˆafterNodeAccessä¼šå°†è¯¥è¯¥èŠ‚ç‚¹ç½®äºæœ€åï¼Œget()æ–¹æ³•ä¹Ÿæ˜¯")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getOrDefault")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v(" defaultValue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getNode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n           "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" defaultValue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("accessOrder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n           "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("afterNodeAccess")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Node")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getNode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("accessOrder"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("afterNodeAccess")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è¿™ä¸ªæ–¹æ³•ä¼šæ ¹æ®removeEldestEntryæ–¹æ³•è¿”å›å€¼è¿›è¡Œåˆ¤æ–­ï¼ˆéœ€è¦è¿›è¡Œé‡å†™ï¼‰ï¼Œå¦‚æœä¸ºfalseä¼šè‡ªåŠ¨å°†å¤´èŠ‚ç‚¹åˆ é™¤")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("afterNodeInsertion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" evict"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// possibly remove eldest")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LinkedHashMap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Entry")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" first"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("evict "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("first "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" head"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeEldestEntry")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("first"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" first"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeNode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//å¦‚æœè¦å®ç°LRUï¼Œé‚£ä¹ˆå°±å¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œå®šä¹‰å®¹é‡ï¼Œå¦‚æœè¶…è¿‡å®¹é‡ï¼Œå°±ä¼šå°†æœ€å°‘ä½¿ç”¨çš„å¤´èŠ‚ç‚¹åˆ é™¤")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("removeEldestEntry")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Entry")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("K")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("V")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" eldest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])]),t("ol",[t("li",[s._v("LinkedHashMapå¯ä»¥å®ç°ä»€ä¹ˆï¼ŸLRU")]),s._v(" "),t("li",[s._v("åº•å±‚æ•°æ®ç»“æ„æ˜¯æ€æ ·çš„ï¼ŸåŒå‘é“¾è¡¨+çº¢é»‘æ ‘+æ•°ç»„")]),s._v(" "),t("li",[s._v("hashmapæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå®ƒæ˜¯æœ‰åºçš„")])])])}),[],!1,null,null,null);a.default=e.exports}}]);