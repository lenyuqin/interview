---
title: 网络层(ICMP,ARP,IP)
date: 2021-04-14 20:41:07
permalink: /pages/b92666/
categories:
  - 基础学科
  - 计算机网络
tags:
  - 
---
## ICMP协议

ICMP协议简介ICMP是“Internet Control Message Protocol”（Internet控制消息协议）的缩写。它是TCP/IP协议族的一个子协议，用于在IP主机、路由器之间传递控制消息。控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。这些控制消息虽然并不传输用户数据，但是对于用户数据的传递起着重要的作用

## ARP协议和ARP攻击

**ARP协议完成了IP地址与物理地址的映射**。每一个主机都设有一个 ARP 高速缓存，里面有**所在的局域网**上的各主机和路由器的 IP 地址到硬件地址的映射表。当源主机要发送数据包到目的主机时，会先检查自己的ARP高速缓存中有没有目的主机的MAC地址，如果有，就直接将数据包发到这个MAC地址，如果没有，就向**所在的局域网**发起一个ARP请求的广播包（在发送自己的 ARP 请求时，同时会带上自己的 IP 地址到硬件地址的映射），收到请求的主机检查自己的IP地址和目的主机的IP地址是否一致，如果一致，则先保存源主机的映射到自己的ARP缓存，然后给源主机发送一个ARP响应数据包。源主机收到响应数据包之后，先添加目的主机的IP地址与MAC地址的映射，再进行数据传送。如果源主机一直没有收到响应，表示ARP查询失败。

如果所要找的主机和源主机不在同一个局域网上，那么就要通过 ARP 找到一个位于本局域网上的某个路由器的硬件地址，然后把分组发送给这个路由器，让这个路由器把分组转发给下一个网络。剩下的工作就由下一个网络来做。

ARP攻击的就是伪造ARP应答的IP地址和MAC地址

## 路由器和交换机的区别

1. 工作层次不同：交换机比路由器更简单，路由器比交换器能获取更多信息
2. 交换机工作在数据链路层，而路由器工作在网络层
3. 数据转发所依据的对象不同（交换机根据mac地址，路由器根据ip地址进行转发）
4. 传统的交换机只能分割冲突域，不能分割广播域;而路由器可以分割广播域

## 网络层提供的两种服务

![image-20210202175328716](https://img.xiaoyou66.com/2021/03/21/b9e09e3f8593b.png)